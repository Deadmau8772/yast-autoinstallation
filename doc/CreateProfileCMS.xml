 <sect1 id="CreateProfile.CMS">
  <title>
    Using the Configuration Management System
  </title>  
  <para>
    In order to create the control file for a specific computer, a &yast2;
    based system is provided. This system depends on existing modules
    which are usually used to configure a computer in regular operation mode,
    i.e. after &company-suse; Linux is installed.
  </para>
  <para>
    The configuration management system lets you create control files easily and
    additionally it lets you manage a repository of configurations for use
    in a networked environment and with multiple clients.
  </para>
  <figure>
    <title>Configuration System</title>
    <mediaobject>&cms-configuration-type;</mediaobject>
  </figure>
  
  <sect2>
    <title>Creating a new Profile</title>
    <para>
      With some exceptions, almost all resources of the control file can
      be configured using the configuration management system. The system
      offers you much flexibility and the configuration of some resources are
      the same available in the &yast2; Control Center. New
      interfaces were created for special and complex configuration resources,
      i.e. Partitioning and General options to make it easier for you to access
      the infromation in an easy and fast way. 
    </para>
    <para>
      Furthermore, using the &cms; guarantees that the resulting control file is
      valid and can be used directly to start an automated installation.
    </para>
    <para>
      Make sure the configuration system is installed (package
      <emphasis>autoyast2</emphasis> and call it using the <emphasis>YaST2 Control
	Center</emphasis> or call it directly as root with the
      following command (make sure the <emphasis>DISPLAY</emphasis> variable is set correctly to
      start the graphical user interface instead of the text based one):
    </para>
    <screen>
/sbin/yast2 autoyast
    </screen>
  
    <sect3>
      <title>Going through the Configuration Management System</title>
      <para>
	If you intend to create a new configuration, select the respective
	option from the main screen of the &cms;. This will lead you to the
	<emphasis>File management</emphasis> screen where you can start a new
	or edit an existing configuration. The files shown on the screen by
	default are complete configurations which can be used for
	auto-installation without any change. These files are stored in the
	main configuration repository. If you are using classes to
	create you configuration, switch to the <emphasis>Templates</emphasis>
	view. (Templates are stored in the <emphasis>templates</emphasis>
	directory beneath the  configuration repository.
      </para>
      <para>To start with the configuration, select an existing file using the
	<emphasis>edit</emphasis> button or start a new configuration by
	clicking on the <emphasis>new</emphasis> button which will open a
	pop-up asking for the new file name.
	
      </para>
      <para>
	This will lead you directly to the configuration options which can be
	browsed in any desired order. You can choose to configure only those resources
	you need. 
      </para>
      <figure id="autoyast-conftree">
	<title id="autoyast-conftree.title" >Configuration Options</title>
	<mediaobject>&autoyast-conftree;</mediaobject>
      </figure>

      <para>
	Clicking on a configuration option will show a summary of the current
	configuration. It is possible to reset a configuration resource at any
	time. To configure a resource, click on the
	<emphasis>configure</emphasis> button.
      </para>
      <figure id="cms-configuration-general-options">
	<title id="cms-configuration-general-options.title" >General Options</title>
	<mediaobject>&cms-configuration-general-options;</mediaobject>
      </figure>   
    </sect3>
  </sect2>


  <sect2>
    <title>Import of Legacy and Foreign Configuration Files</title>
    <para>Using &autoyast2;, you can import ALICE configuration files from
      previous SuSE releases and foreign auto-installation systems
      (Kickstart). Please consult the chapter dealing with these issues in this
      manual.
      </para>
  </sect2>
  <sect2 id="Classes">
    <title>
      Using Classes and Templates
    </title>
    <simplesect>
      <title>Classes</title>
      <para>
	Using the configuration management system, you can define a set of
	classes. The class definition consists  of the following variable for each class:
      </para>
      <itemizedlist>
	<listitem>
	  <para>	        
	    Name: Class name
	  </para>
	</listitem>
	<listitem>
	  <para>	    
	    Descriptions: Class description
	  </para>
	</listitem>
	<listitem>
	  <para>	        
	    Order: Order (or priority) of the class in the stack of migration
	  </para>
	</listitem>
      </itemizedlist>
      <figure>
	<title>Defining Classes</title>
	<mediaobject>&cms-class-definitions;</mediaobject>	  
      </figure>
      <para>
	You can create as many classes as required, however it is
	recommended to keep the set of classes as small as possible to keep the
	configuration system concise. As an example, the following set of
	classes can be used:
      </para>
      <itemizedlist>
	<listitem>
	  <para>
	    site: Classes describing a physical location or site.
	  </para>
	</listitem>
	<listitem>
	  <para>machine: Classes describing a type of machine or make</para>
	</listitem>
	<listitem>
	  <para>role: Classes describing the function of the machine to be installed</para>
	</listitem>
	<listitem>
	  <para>group: Classes describing a department or a group within a site or a location.</para>
	</listitem>
      </itemizedlist>
      <para>
	A  file defined in a class can have the same syntax and format as the
	regular control file and represents a subset of the configuration. For example,
	to create a new control file  for a special computer with a specific network
	interface, only the resource in the control file, which control
	the configuration of the network are needed. Having multiple network
	types, you can merge the one needed for a special type of hardware
	with other class files and thus, creating a new control file which
	corosponds to the defined classes.
      </para>

    </simplesect>
    <simplesect>
      <title>Templates</title>
      <para>      
	Templates are control files which are not complete in their content and
	belong to one or several classes. To make a template installable, it has
	to run through  a merge process which will set all needed values
	according to the data available in the configurations  within
	the classes.
      </para>
      <para>
	If you define classes in the control file using the &cms;, the file
	will not be saved in the repository, instead it will be installed in
	the <filename>templates</filename> directory in the repository.
      </para>
    </simplesect>
  </sect2>

</sect1>



      <!--
       Local Variables:
       mode: xml
       sgml-parent-document: ("autoyast2.xml" "book" "sect1")
       End:
      -->
