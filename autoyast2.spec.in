@HEADER-COMMENT@

# neededforbuild  ImageMagick docbook-dsssl-stylesheets docbook-toys docbook_3 docbook_4 expat freetype2 iso_ent jade_dsl liblcms libpng perl-Text-DelimMatch perl-URI perl-XML-DOM perl-XML-Parser perl-XML-RegExp perl-XML-Simple perl-libwww-perl sp sp-devel xf86 yast2-devel-packages ghostscript-fonts-other ghostscript-fonts-std ghostscript-library ghostscript-serv ghostscript-x11 libgimpprint glib

@HEADER@
Requires:	yast2-core yast2-xml libxslt autoyast2-installation
Requires:	mkisofs alice-compat
Provides:	yast2-module-autoinst yast2-config-autoinst
Obsoletes:	yast2-module-autoinst yast2-config-autoinst
Provides:	yast2-lib-autoinst
Obsoletes:	yast2-lib-autoinst
PreReq:		%insserv_prereq %fillup_prereq

BuildArchitectures:	noarch

Summary:	YaST2 auto-installation

%description
-


%package installation
Version:    @VERSION@
Summary:    YaST2 Modules for inst-sys
Group:      YaST2
Requires:	yast2-xml yast2-core
Obsoletes:	yast2-trans-autoinst
Requires:	yast2-transfer
%description installation
-


@PREP@

@BUILD@

@INSTALL@

# Class conf
install -d $RPM_BUILD_ROOT/etc/autoinstall

# Installation files
install -d $RPM_BUILD_ROOT/var/adm/autoinstall/scripts
install -d $RPM_BUILD_ROOT/var/adm/autoinstall/logs
install -d $RPM_BUILD_ROOT/var/adm/autoinstall/files
install -d $RPM_BUILD_ROOT/var/adm/autoinstall/variables
install -d $RPM_BUILD_ROOT/var/adm/autoinstall/cache

# Repository
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository/templates
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/classes
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/autoconf


@CLEAN@

%post
%{fillup_only -n autoinstall}


%files
%defattr(-,root,root)
%dir /etc/autoinstall
%dir @yncludedir@/autoinstall
%dir /var/lib/autoinstall/repository
%dir /var/lib/autoinstall/repository/templates
%dir /var/lib/autoinstall/classes


@yncludedir@/autoinstall/bootloader_dialogs.ycp
@yncludedir@/autoinstall/classes.ycp
@yncludedir@/autoinstall/conftree.ycp
@yncludedir@/autoinstall/linuxrc_dialogs.ycp
@yncludedir@/autoinstall/dialogs.ycp
@yncludedir@/autoinstall/help.ycp
@yncludedir@/autoinstall/imports.ycp
@yncludedir@/autoinstall/intallation-server.ycp
@yncludedir@/autoinstall/packageMgmt.ycp
@yncludedir@/autoinstall/partition_dialogs.ycp
@yncludedir@/autoinstall/script_dialogs.ycp
@yncludedir@/autoinstall/x11_dialogs.ycp
@yncludedir@/autoinstall/video_data_dialog.ycp

@clientdir@/autoinst_bootloader.ycp
@clientdir@/autoinst_general.ycp
@clientdir@/autoinst_report.ycp
@clientdir@/autoinst_linuxrc.ycp
@clientdir@/autoinst_x11.ycp
@clientdir@/autoinst_users.ycp
@clientdir@/autoinst_monitor.ycp
@clientdir@/autoinst_files.ycp
@clientdir@/autoinst_sysconfig.ycp
@clientdir@/autoinst_scripts.ycp
@clientdir@/autoinst_software.ycp
@clientdir@/autoinst_storage.ycp
@clientdir@/autoinst_tools.ycp
@clientdir@/autoyast.ycp
#@clientdir@/createCustomCD.ycp

@scrconfdir@/cfg_autoinstall.scr
@scrconfdir@/syslinux_cfg.scr
@scrconfdir@/tmp_alice_network.scr
@scrconfdir@/tmp_alice_part.scr
@scrconfdir@/ksimport.scr
@scrconfdir@/tmp_alice_routes.scr
@scrconfdir@/yast1sel.scr


@ydatadir@/monitors.ycp
@moduledir@/AIBootloader.ycp
@moduledir@/AIClass.ycp
@moduledir@/AILinuxrc.ycp
@moduledir@/AIConfig.ycp
@moduledir@/AIPackages.ycp
@moduledir@/AIScripts.ycp
@moduledir@/AIServer.ycp
@moduledir@/AIStorage.ycp
@agentdir@/ag_yast1sel
@agentdir@/ag_ksimport


# DTD files
@yncludedir@/autoinstall/*.dtd
%doc @docdir@

# additional files
/usr/share/autoinstall/*
/var/adm/fillup-templates/sysconfig.autoinstall
@ybindir@/create_package_descr


%files installation
%defattr(-,root,root)
@scrconfdir@/autoinstall.scr
@moduledir@/AIClone.ycp
@clientdir@/autoinst_configure.ycp
%dir @yncludedir@/autoinstall
@yncludedir@/autoinstall/partitioning.ycp
@yncludedir@/autoinstall/profileLocation.ycp
@yncludedir@/autoinstall/profileDialogs.ycp
@yncludedir@/autoinstall/profile.dtd
@yncludedir@/autoinstall/io.ycp
@yncludedir@/autoinstall/misc_writes.ycp

@moduledir@/AutoInstall.ycp
@clientdir@/autoinst_init.ycp
@clientdir@/autoinst_setup.ycp
@yncludedir@/autoinstall/xml.ycp



%dir /var/adm/autoinstall/
%dir /var/adm/autoinstall/scripts
%dir /var/adm/autoinstall/logs
%dir /var/adm/autoinstall/files
%dir /var/adm/autoinstall/variables
%dir /var/adm/autoinstall/cache
%dir /var/lib/autoinstall/autoconf

