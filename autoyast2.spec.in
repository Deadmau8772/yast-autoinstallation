@HEADER-COMMENT@

# neededforbuild yast2-devel-packages yast2 yast2-installation yast2-xml yast2-transfer yast2-storage yast2-country yast2-mouse yast2-bootloader yast2-packager yast2-x11

@HEADER@
Requires:	yast2-core yast2-xml libxslt
Requires:   autoyast2-installation = %{version}
Provides:	yast2-module-autoinst yast2-config-autoinst
Obsoletes:	yast2-module-autoinst yast2-config-autoinst
Provides:	yast2-lib-autoinst
Obsoletes:	yast2-lib-autoinst
PreReq:		%insserv_prereq %fillup_prereq
Source1:    doc-9.0.tar.bz2

BuildArchitectures:	noarch

Summary:	YaST2 auto-installation

%description
-


%package installation
Version:    @VERSION@
Summary:    YaST2 Modules for inst-sys
Group:      YaST2
Requires:	yast2-xml yast2-core
Requires:	yast2-transfer
Provides:	yast2-trans-autoinst
Obsoletes:	yast2-trans-autoinst
%description installation
-

%package utils
Version:    @VERSION@
Summary:    YaST2 Modules for inst-sys
Group:      YaST2
%description utils
-

@PREP@
%setup -q -a 1

@BUILD@

@INSTALL@

# Class conf
install -d -m 700 $RPM_BUILD_ROOT/etc/autoinstall
# Installation files
install -d -m 700 $RPM_BUILD_ROOT/var/adm/autoinstall/scripts
install -d -m 700 $RPM_BUILD_ROOT/var/adm/autoinstall/logs
install -d -m 700 $RPM_BUILD_ROOT/var/adm/autoinstall/files
install -d -m 700 $RPM_BUILD_ROOT/var/adm/autoinstall/cache

# Repository
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository/templates
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository/rules
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/repository/classes
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/autoconf
install -d $RPM_BUILD_ROOT/var/lib/autoinstall/tmp


@CLEAN@

%post
%{fillup_only -n autoinstall}


%files
%defattr(-,root,root)
%dir /etc/autoinstall
%dir @yncludedir@/autoinstall
%dir /var/lib/autoinstall/repository
%dir /var/lib/autoinstall/repository/templates
%dir /var/lib/autoinstall/repository/rules
%dir /var/lib/autoinstall/repository/classes
%dir /var/lib/autoinstall/tmp


@desktopdir@/autoyast.desktop
/usr/share/autoinstall/modules/*.desktop
@yncludedir@/autoinstall/classes.ycp
@yncludedir@/autoinstall/conftree.ycp
@yncludedir@/autoinstall/dialogs.ycp
@yncludedir@/autoinstall/alice.ycp
@yncludedir@/autoinstall/partition_dialogs.ycp
@yncludedir@/autoinstall/script_dialogs.ycp
@yncludedir@/autoinstall/video_data_dialog.ycp
@yncludedir@/autoinstall/file_dialogs.ycp
@yncludedir@/autoinstall/general_dialogs.ycp
@yncludedir@/autoinstall/reporting_dialogs.ycp

@clientdir@/autoinst_general.ycp
@clientdir@/autoinst_report.ycp
@clientdir@/autoinst_classes.ycp
@clientdir@/autoinst_monitor.ycp
@clientdir@/autoinst_scripts.ycp
@clientdir@/autoinst_software.ycp
@clientdir@/autoinst_storage.ycp
@clientdir@/autoyast.ycp
#@clientdir@/createCustomCD.ycp

@scrconfdir@/cfg_autoinstall.scr
@scrconfdir@/tmp_alice_network.scr
@scrconfdir@/tmp_alice_part.scr
@scrconfdir@/ksimport.scr
@scrconfdir@/tmp_alice_routes.scr
@scrconfdir@/yast1sel.scr


@ydatadir@/monitors.ycp
@moduledir@/AutoinstClass.y*
@moduledir@/Kickstart.y*
@moduledir@/AutoinstConfig.y*
@agentdir@/ag_yast1sel
@agentdir@/ag_ksimport


%doc html

# additional files

/var/adm/fillup-templates/sysconfig.autoinstall

############################################################################
############################################################################
####
#### installation
####
############################################################################
############################################################################

%files installation
%defattr(-,root,root)
@scrconfdir@/autoinstall.scr
# DTD files
%dir /usr/share/autoinstall
%dir /usr/share/autoinstall/dtd
%dir /usr/share/autoinstall/rng
%dir /usr/share/autoinstall/modules
/usr/share/autoinstall/dtd/*
/usr/share/autoinstall/rng/*

%dir /usr/share/autoinstall/xslt
/usr/share/autoinstall/xslt/merge.xslt
# config file

@moduledir@/AutoinstClone.y*
%dir @yncludedir@/autoinstall
@yncludedir@/autoinstall/partitioning.ycp
@yncludedir@/autoinstall/io.ycp
@yncludedir@/autoinstall/autoinst.ycp
@yncludedir@/autoinstall/autoinst_dialogs.ycp
@yncludedir@/autoinstall/partitioning_routines.ycp

@moduledir@/AutoInstall.y*
@moduledir@/AutoinstScripts.y*
@moduledir@/AutoinstGeneral.y*
@moduledir@/Y2ModuleConfig.y*
@moduledir@/Profile.y*
@moduledir@/AutoinstFile.y*
@moduledir@/AutoinstCompat.y*
@moduledir@/AutoinstSoftware.y*
@moduledir@/AutoinstLVM.y*
@moduledir@/AutoinstRAID.y*
@moduledir@/AutoinstStorage.y*
@moduledir@/AutoInstallRules.y*
@moduledir@/ProfileLocation.y*

#clients
@clientdir@/autoinst_init.ycp
@clientdir@/autoinst_image.ycp
@clientdir@/autoinst_setup.ycp
@clientdir@/autoinst_configure.ycp
@clientdir@/autoinst_post.ycp
@clientdir@/autoinst_files.ycp

@yncludedir@/autoinstall/xml.ycp



%dir /var/adm/autoinstall/
%dir /var/adm/autoinstall/scripts
%dir /var/adm/autoinstall/logs
%dir /var/adm/autoinstall/files
%dir /var/adm/autoinstall/cache
%dir /var/lib/autoinstall
%dir /var/lib/autoinstall/autoconf


%files utils
%defattr(-,root,root)
/usr/share/autoinstall/EXTRA_PROV
/usr/bin/create_package_descr
